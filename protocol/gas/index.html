
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../encode/">
      
      
        <link rel="next" href="../keyring/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>Gas and fees - DAODST document</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bd3936ea.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prerequisites-to-read" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DAODST document" class="md-header__button md-logo" aria-label="DAODST document" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DAODST document
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Gas and fees
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="https://zh-tw.docs.daodst.com" hreflang="zh" class="md-select__link">
              ‰∏≠Êñá
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="https://docs.daodst.com" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../stcd/" class="md-tabs__link">
          
  
  üîçProtocol

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../modules_accounts/" class="md-tabs__link">
          
  
  üß±Module

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../gateway/run/" class="md-tabs__link">
          
  
  ‚úàGateways and Authenticators

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../chat/installation/" class="md-tabs__link">
          
  
  üìûChat

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../window/introduce/" class="md-tabs__link">
          
  
  Cross-chain

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../faq/" class="md-tabs__link">
        
  
    
  
  üìãFAQ

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DAODST document" class="md-nav__button md-logo" aria-label="DAODST document" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    DAODST document
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    üîçProtocol
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            üîçProtocol
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1" >
        
          
          <label class="md-nav__link" for="__nav_1_1" id="__nav_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Command Line Interface
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1">
            <span class="md-nav__icon md-icon"></span>
            Command Line Interface
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../stcd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    install
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../stcd/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../stcd/single-node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Single-node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../stcd/command/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI command
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    account
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../chainid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    chain ID
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../encode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    encode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Gas and fees
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Gas and fees
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites-to-read" class="md-nav__link">
    Prerequisites to read
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#base" class="md-nav__link">
    Base
  </a>
  
    <nav class="md-nav" aria-label="Base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-is-there-a-transaction-fee" class="md-nav__link">
    Why is there a transaction fee?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-gas" class="md-nav__link">
    What is Gas?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-calculate-gas" class="md-nav__link">
    How to calculate Gas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-relationship-between-gas-and-handling-fee" class="md-nav__link">
    The relationship between Gas and handling fee?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-cosmos-handle-transaction-fees" class="md-nav__link">
    How does Cosmos handle transaction fees?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-handle-fees-on-ethereum" class="md-nav__link">
    How to handle fees on Ethereum?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    Implementation
  </a>
  
    <nav class="md-nav" aria-label="Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-deal-with-gas-and-fees-on-daodst" class="md-nav__link">
    How to deal with Gas and fees on Daodst?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detailed-schedule" class="md-nav__link">
    Detailed schedule
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-practice" class="md-nav__link">
    Detailed practice
  </a>
  
    <nav class="md-nav" aria-label="Detailed practice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cosmos-gas" class="md-nav__link">
    Cosmos Gas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#match-evm-gas-consumption" class="md-nav__link">
    Match EVM Gas consumption
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#antehandler" class="md-nav__link">
    AnteHandler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gas-return" class="md-nav__link">
    Gas Return
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zero-fee-transactions" class="md-nav__link">
    Zero Fee Transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gas-estimate" class="md-nav__link">
    Gas Estimate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-daodst-cli-to-process-gas-and-transaction-fees" class="md-nav__link">
    Use Daodst CLI to process Gas and transaction fees
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../keyring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    keyring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../key-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Key Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../state-migrate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    State import and export
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../pending/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    waiting queue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../multsign/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multsignature
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../coin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    token
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../transfer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transfer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    üß±Module
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            üß±Module
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../modules_accounts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Module Accounts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../evm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../chat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mgateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gateway
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contract/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contract
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../pledge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pledge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../bank/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bank
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gov/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gov
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distribute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../slashing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slashing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../staking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Staking
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    ‚úàGateways and Authenticators
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            ‚úàGateways and Authenticators
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Settings and configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Settings and configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run Validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/disk-usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Disk usage optimization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/state-sync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    state-sync
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/mempool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mempool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/key-backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Key Backup Restore
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Security
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Checklist
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/safe-node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sentinel Nodes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    upgrade
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            upgrade
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade List
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/hard-fork/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hard Fork Upgrade
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/auto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Auto Upgrade
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/manual/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manual upgrade
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/rollback/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rollback
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proposal Template
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/testnet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    testnet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/mainnet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mainnet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Gateway Operation Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Gateway Operation Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/guide-linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operation Guide(linux)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/guide-win/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operation Guide(win)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/key-backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Key backup and recovery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ttts/ttts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Translation&Text-to-Speech
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    üìûChat
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            üìûChat
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../chat/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation Start
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../chat/chat_doc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../chat/customise_doc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customise
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../chat/voip_signaling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Call flow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../chat/optional_cfg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optional Configuration*
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../chat/faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Cross-chain
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Cross-chain
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cross-chain desktop program for sellers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Cross-chain desktop program for sellers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../window/introduce/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduce
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../window/info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instructions for use
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìãFAQ
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites-to-read" class="md-nav__link">
    Prerequisites to read
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#base" class="md-nav__link">
    Base
  </a>
  
    <nav class="md-nav" aria-label="Base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-is-there-a-transaction-fee" class="md-nav__link">
    Why is there a transaction fee?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-gas" class="md-nav__link">
    What is Gas?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-calculate-gas" class="md-nav__link">
    How to calculate Gas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-relationship-between-gas-and-handling-fee" class="md-nav__link">
    The relationship between Gas and handling fee?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-cosmos-handle-transaction-fees" class="md-nav__link">
    How does Cosmos handle transaction fees?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-handle-fees-on-ethereum" class="md-nav__link">
    How to handle fees on Ethereum?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    Implementation
  </a>
  
    <nav class="md-nav" aria-label="Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-deal-with-gas-and-fees-on-daodst" class="md-nav__link">
    How to deal with Gas and fees on Daodst?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detailed-schedule" class="md-nav__link">
    Detailed schedule
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-practice" class="md-nav__link">
    Detailed practice
  </a>
  
    <nav class="md-nav" aria-label="Detailed practice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cosmos-gas" class="md-nav__link">
    Cosmos Gas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#match-evm-gas-consumption" class="md-nav__link">
    Match EVM Gas consumption
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#antehandler" class="md-nav__link">
    AnteHandler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gas-return" class="md-nav__link">
    Gas Return
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zero-fee-transactions" class="md-nav__link">
    Zero Fee Transactions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gas-estimate" class="md-nav__link">
    Gas Estimate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-daodst-cli-to-process-gas-and-transaction-fees" class="md-nav__link">
    Use Daodst CLI to process Gas and transaction fees
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Gas and fees</h1>

<p>Users need to pay fees to submit transactions on the Daodst network.
Since fees are handled differently in Ethereum and Cosmos, it is important to understand how the Daodst blockchain implements Ethereum-type fee calculations that are compatible with the Cosmos SDK.</p>
<p>Thus, this overview explains the basics of gas calculations, how fees are provided for transactions, and how Ethereum-style fee calculations use the fee market (EIP1559) to prioritize transactions.</p>
<p>Also note that fees paid for interacting with smart contracts on Daodst can earn revenue for smart contract deployers.
For information on this, go to <a href="./../../develop/mainnet#revenue">develop</a>.</p>
<h2 id="prerequisites-to-read">Prerequisites to read</h2>
<ul>
<li><a href="https://docs.cosmos.network/main/basics/gas-fees.html">Cosmos SDK Gas</a></li>
<li><a href="https://ethereum.org/en/developers/docs/gas/">Ethereum Gas</a></li>
</ul>
<h2 id="base">Base</h2>
<h3 id="why-is-there-a-transaction-fee">Why is there a transaction fee?</h3>
<p>If anyone could submit transactions to the network for free, the network could be overwhelmed by a small number of participants sending fraudulent transactions to clog the network and make it non-functional.</p>
<p>The solution to this problem is a concept called <code>gas</code>, which is the resource consumed throughout the execution of a transaction.</p>
<p>In practice, each step of code execution consumes a small amount of gas, effectively charging validator resource usage and preventing malicious actors from disrupting the network at will.</p>
<h3 id="what-is-gas">What is Gas?</h3>
<p>In general, gas is a unit of measure for the computational intensity of a particular transaction ‚Äî in other words, how much work is required to evaluate and execute it.</p>
<p>Complex multi-step transactions, such as a Cosmos transaction that delegates to a dozen validators, require more gas than simple single-step transactions (such as a Cosmos transaction that sends tokens to another address).</p>
<p>When referring to a transaction, <code>gas</code> refers to the total amount of gas required for the transaction.</p>
<p>For example, a transaction may require 300,000 units of gas to execute.</p>
<p>Think of gas as electricity (kWh) in a house or factory, or as fuel for a car.</p>
<p>The idea is that it costs some money to get somewhere.</p>
<p>More Gas introduction:</p>
<ul>
<li><a href="https://docs.cosmos.network/main/basics/gas-fees">Cosmos Gas Fees</a></li>
<li><a href="https://docs.cosmos.network/main/basics/tx-lifecycle.html">Cosmos Tx Lifecycle</a></li>
<li><a href="https://ethereum.org/en/developers/docs/gas/">Ethereum Gas</a></li>
</ul>
<h3 id="how-to-calculate-gas">How to calculate Gas</h3>
<p>In general, there is no way to know exactly how much gas a transaction will cost without simply running it.</p>
<p>Using the Cosmos SDK, this can be done with <a href="https://docs.cosmos.network/main/run-node/txs#simulating-a-transaction">Simulating a Tx</a>.</p>
<p>Otherwise, there are ways to estimate the gas a transaction will require based on details of the transaction fields and data.</p>
<p>For example, in the case of the EVM, each bytecode operation has <a href="https://ethereum.org/en/developers/docs/evm/opcodes/">a corresponding amount of gas</a>.</p>
<p>More about Gas calculation:</p>
<ul>
<li><a href="https://docs.ethers.org/v5/api/providers/provider/#Provider-estimateGas">Estimate Gas</a></li>
<li><a href="https://ethereum.org/en/developers/docs/evm/opcodes/">Executing EVM Bytecode</a></li>
<li><a href="https://docs.cosmos.network/main/run-node/txs#simulating-a-transaction">Simulate a Cosmos SDK Tx</a></li>
</ul>
<h3 id="the-relationship-between-gas-and-handling-fee">The relationship between Gas and handling fee?</h3>
<p>Gas refers to the computational work required to perform it, while the fee refers to the amount of tokens you actually spend to execute the transaction.</p>
<p>They are derived using the following formulas:</p>
<pre><code class="language-markdown">Total Fees = Gas * Gas Price (the price per unit of gas)
</code></pre>
<p>If <code>gas</code> is in kWh, then "gas price" will be the rate determined by your energy supplier in USD/kWh, and <code>fees</code> will be your bill.</p>
<p>Like electricity, gas prices can fluctuate on a given day, depending on network traffic.</p>
<p>More about Gas and Fees:</p>
<ul>
<li><a href="https://docs.cosmos.network/main/basics/gas-fees">Cosmos Gas and Fees</a></li>
<li><a href="https://ethereum.org/en/developers/docs/gas/">Ethereum Gas and Fees</a></li>
</ul>
<h3 id="how-does-cosmos-handle-transaction-fees">How does Cosmos handle transaction fees?</h3>
<p>Gas fees in Cosmos are relatively simple. As a user, you specify two fields:</p>
<ol>
<li>Corresponding to <code>GasLimit</code> of the execution gas limit, defined as <code>GasWanted</code></li>
<li>One of <code>Fees</code> or <code>GasPrice</code>, which will be used to specify or calculate the transaction fee</li>
</ol>
<p>The node will fully consume the provided fee and then start executing the transaction.
If the <code>GasLimit</code> is found to be insufficient during execution, the transaction will fail and any changes will be rolled back, the provided fee will not be refunded.</p>
<p>Validators of Cosmos SDK-based chains can specify a "minimum gas price" that they will enforce when selecting transactions to include in a block.</p>
<p>As a result, transactions with insufficient fees will experience delays or fail outright.</p>
<p>At the beginning of each block, the previous block's fees are <a href="https://docs.cosmos.network/main/modules/distribution">distributed to validators and delegators</a>, after which they can be withdrawn and spent.</p>
<h3 id="how-to-handle-fees-on-ethereum">How to handle fees on Ethereum?</h3>
<p>Ethereum fees include multiple implementations introduced over time.</p>
<p>Initially, the user will specify the <code>GasPrice</code> and <code>GasLimit</code> in the transaction - much like a Cosmos SDK transaction.</p>
<p>Block proposers will receive the full gas fee from each transaction in the block, and they will choose which transactions to include accordingly.</p>
<p>With the proposal EIP-1559 and the London hard fork, the gas calculation has changed.</p>
<p>The above <code>GasPrice</code> is now split into two separate parts: <code>BaseFee</code> and <code>PriorityFee</code>.</p>
<p><code>BaseFee</code> is automatically calculated based on the block size and will be destroyed once the block is mined.</p>
<p><code>PriorityFee</code> is given to the proposer and represents a tip, or incentive for the proposer to include the transaction in a block.</p>
<pre><code class="language-markdown">Gas Price = Base Fee + Priority Fee
</code></pre>
<p>In a transaction, in addition to specifying a <code>gas_limit</code> as before, the user can specify a <code>max_fee_per_gas</code> corresponding to the total <code>GasPrice</code> and a <code>max_priority_fee_per_gas</code> corresponding to the maximum <code>PriorityFee</code>.</p>
<p>All excess gas not required for execution is returned to the user.</p>
<p>More about Ethereum fees:</p>
<ul>
<li><a href="https://ethereum.org/en/developers/docs/gas/">Gas Calculation Docs</a></li>
<li><a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1559.md">Proposal EIP-1559</a></li>
</ul>
<h2 id="implementation">Implementation</h2>
<h3 id="how-to-deal-with-gas-and-fees-on-daodst">How to deal with Gas and fees on Daodst?</h3>
<p>Fundamentally, Daodst is a Cosmos SDK chain that enables EVM compatibility as part of a Cosmos SDK module. Due to this architecture, all EVM transactions are ultimately encoded as Cosmos SDK transactions and update the state managed by the Cosmos SDK. Since all transactions are represented as Cosmos SDK transactions, transaction fees can be at different execution layers.</p>
<p>In fact, processing fees include standard Cosmos SDK logic, some Ethereum logic, and customDaodst logic. In most cases, fees are collected by the <code>fee_collector</code> module and then paid to validators and delegators. Some key differences are as follows:</p>
<p><strong>1.Fee Market Module</strong></p>
<p>To support EIP-1559 gas and fee calculations on Daodst's EVM layer, Daodst tracks the gas supplied for each block and uses it to calculate the base fee for future EVM transactions, enabling EIP-specified EVM dynamic fees and transaction prioritization Level -1559.</p>
<p>For EVM transactions, each node bypasses its local <code>min-gas-prices</code> configuration and instead applies EIP-1559 fee logic - the gas price must simply be greater than the global <code>min-gas-price</code> and the block's <code>BaseFee</code>, the remainder is considered the priority tip.</p>
<p>This allows validators to calculate Ethereum fees without applying the Cosmos SDK fee logic.</p>
<p>Unlike Ethereum, the <code>BaseFee</code> on Daodst will not be destroyed, but distributed to validators and delegators</p>
<p>Additionally, <code>BaseFee</code> is bounded by the global <code>min-gas-price</code> (currently, the global <code>min-gas-price</code> parameter is set to zero, although it can be updated via governance).</p>
<p><strong>2. EVM Gas refund</strong></p>
<p>Daodst refunds a small portion (at least 50% by default) of unspent gas for EVM transactions to approximate the current behavior on Ethereum.</p>
<p><strong>3. Income module</strong></p>
<p>Daodst develops the revenue module as a way to reward developers for creating useful dApps - any contract that registers with the Daodst revenue module rewards the contract developer with a small portion of transaction fees (currently 95% ). Validators and delegators earn the remainder.</p>
<h3 id="detailed-schedule">Detailed schedule</h3>
<ol>
<li>
<p>The node executes the previous block and runs the <code>EndBlock</code> hook * As part of this hook, the FeeMarket (EIP-1559) module tracks the total <code>TransientGasWanted</code> from transactions on that block.
   This will be used for the <code>BaseFee</code> of the next block.</p>
</li>
<li>
<p>Nodes receive transactions for subsequent blocks and gossip about these transactions to their peers *These can be sorted and prioritized by included fee price (EVM transactions using the EIP-1559 fee priority mechanism will be included in the next block</p>
</li>
<li>
<p>The node runs the <code>BeginBlock</code> * FeeMarket module for the subsequent block to calculate the <code>BaseFee</code> to apply to this block using the total <code>GasWanted</code> from the previous block.</p>
</li>
<li>
<p>Distribution module <a href="https://docs.cosmos.network/main/modules/distribution#begin-block">distributes</a> The previous block's fee rewards to validators and delegators</p>
</li>
<li>
<p>For each valid transaction to be included in this block, the node does the following:</p>
</li>
</ol>
<p>** They run an <code>AnteHandler</code> corresponding to the transaction type **.</p>
<p>This process:</p>
<ol>
<li>Perform basic transaction validation</li>
<li>Verify that the provided fee is greater than the global and local minimum validator values <em>and</em> greater than the computed <code>BaseFee</code><ol>
<li>(For Ethereum transactions) Preempting EVM transaction consumption gas</li>
</ol>
</li>
<li>Deduct the user's transaction fee and transfer it to the <code>fee_collector</code> module</li>
<li>Increase the <code>TransientGasWanted</code> in the current block to calculate the <code>BaseFee</code> of the next block</li>
</ol>
<p><strong>Then, for standard Cosmos transactions, nodes</strong></p>
<ul>
<li>Execute transactions and update status</li>
<li>Transaction consumes gas</li>
</ul>
<p><strong>For Ethereum transactions, nodes:</strong></p>
<ul>
<li>Execute transactions and update status</li>
<li>Calculates the gas used and compares it to the supplied gas, then refunds the remainder of the specified portion</li>
<li>
<p>If the transaction interacts with a registered smart contract, a small portion of the fee used as revenue is sent to the contract developer as part of the revenue module</p>
</li>
<li>
<p>The node runs <code>EndBlock</code> for this block and stores the <code>GasWanted</code> of the block</p>
</li>
</ul>
<h2 id="detailed-practice">Detailed practice</h2>
<h3 id="cosmos-gas">Cosmos <code>Gas</code></h3>
<p>In the Cosmos SDK, gas is mainly tracked in <code>GasMeter</code> and <code>BlockGasMeter</code>:</p>
<ul>
<li><code>GasMeter</code>: Tracks gas consumed during executions that lead to state transitions. It is reset every time a transaction is executed.</li>
<li><code>BlockGasMeter</code>: Tracks gas consumed in a block and enforces gas not exceeding a predefined limit. This limit is defined in the Tendermint consensus parameters and can be changed through governance parameter change proposals.</li>
</ul>
<p>Since gas is priced in bytes, the same interaction with larger parameter values will cost more gas than smaller parameter values (unlike Ethereum's <code>uint256</code> values, Cosmos SDK values use <a href="https://pkg.go.dev/math/big#Int">Big.Int</a> types, which are dynamically resized).</p>
<p>More information on gas as part of the Cosmos SDK can be found <a href="https://docs.cosmos.network/main/basics/gas-fees.html">here</a>.</p>
<h3 id="match-evm-gas-consumption">Match EVM Gas consumption</h3>
<p>Daodst is an EVM compatible chain that supports Ethereum Web3 tools. For this reason, gas consumption must be comparable to other EVMs, most importantly Ethereum.</p>
<p>The main difference between EVM and Cosmos state transitions is that the EVM uses a <a href="https://github.com/ethereum/go-ethereum/blob/master/params/protocol_params.go">gas table</a> for each opcode, Instead, Cosmos uses <code>GasConfig</code> to charge gas for each CRUD operation by setting a fixed per-byte cost for accessing the database.</p>
<p>To match the gas consumed by the EVM, the gas consumption logic in the SDK is ignored, instead the gas consumed is calculated by subtracting the state transition remaining gas plus the refund from the gas limit defined on the message.</p>
<p>To ignore the SDK's gas consumption, we reset the transaction <code>GasMeter</code> count to 0 and manually set it to the <code>gasUsed</code> value calculated by the EVM module at the end of execution.</p>
<h3 id="antehandler"><code>AnteHandler</code></h3>
<p>The Cosmos SDK <a href="https://docs.cosmos.network/main/basics/gas-fees.html#antehandler"><code>AnteHandler</code></a> performs basic checks before transaction execution.</p>
<p>These checks are typically signature verification, transaction field verification, transaction fees, etc.</p>
<p>Regarding gas consumption and fees, <code>AnteHandler</code> checks that the user has enough balance to cover the tx cost (amount plus the fee), and checks that the gas limit defined in the message is greater than or equal to the computed intrinsic gas message.</p>
<h3 id="gas-return">Gas Return</h3>
<p>In EVM, gas can be specified before execution. The full amount of gas specified is consumed at the start of execution (during the <code>AnteHandler</code> step), if any gas remains after execution, the remaining gas will be refunded to the user.</p>
<p>Additionally, the EVM can also define gas to be returned to the user, but these will be limited to a fraction of the gas used, depending on the fork/version used.</p>
<h3 id="zero-fee-transactions">Zero Fee Transactions</h3>
<p>In Cosmos, <code>AnteHandler</code> does not enforce minimum gas prices, because <code>min-gas-prices</code> are checked against local nodes/validators.</p>
<p>In other words, the minimum fee accepted is determined by the validators of the network, and each validator can specify a different minimum value for their fee.</p>
<p>This may allow end users to submit 0-fee transactions if at least one validator is willing to include a <code>0</code> gas price transaction in their proposed block.</p>
<p>For the same reason, in Daodst it is possible to send transactions with a <code>0</code> fee for transaction types other than those defined by the <code>evm</code> module.</p>
<p>EVM module transactions cannot have a "0" fee because the EVM itself requires gas.</p>
<p>This check is done by the EVM transaction stateless validation (i.e. <code>ValidateBasic</code>) function as well as a custom <code>AnteHandler</code> defined by Daodst.</p>
<h3 id="gas-estimate">Gas Estimate</h3>
<p>Ethereum provides a JSON-RPC endpoint <code>eth_estimateGas</code> to help users set the correct gas limit in their transactions.</p>
<p>Therefore, a specific query API <code>EstimateGas</code> is implemented in Daodst. It will apply the transaction against the current block/state and perform a binary search to find the best gas value to return to the user (the same transaction will be applied over and over until we find the minimum gas required before failing).</p>
<p>The reason we need to use binary search is that the gas required by the transaction may be higher than the value returned by the EVM after applying the transaction, so we need to try until we find the optimal value.</p>
<p>A cached context will be used throughout execution to avoid persisting changes in state.</p>
<p>For Cosmos Tx, developers can use Cosmos SDK's <a href="https://docs.cosmos.network/main/run-node/txs#simulating-a-transaction">transaction simulation</a> to create accurate estimates.</p>
<h3 id="use-daodst-cli-to-process-gas-and-transaction-fees">Use Daodst CLI to process Gas and transaction fees</h3>
<p>Users should consider the available options when broadcasting transactions using the Daodst CLI client.
There are three flags to consider when sending a transaction to the network:</p>
<ul>
<li><code>--fees</code>: Fees to pay with the transaction; eg: 10dst. Defaults to required fee.</li>
<li><code>--gas</code>: Gas limit to set per transaction; default is 200000.</li>
<li><code>--gas-prices</code>: gas prices to determine transaction fees (e.g. 10dst).</li>
</ul>
<p>However, not all of these need to be defined in every transaction.
The correct combination is:</p>
<ul>
<li><code>--fees=auto</code>: Automatically estimate fees and gas (same behavior as --gas=auto ).
  An error is thrown if any other fee-related flags are used (e.g. <code>--gas-prices</code>, <code>--fees</code>)</li>
<li><code>--gas=auto</code>: Same behavior as <code>--fees=auto</code>.
  An error is thrown if any other fee-related flags are used (e.g. <code>--gas-prices</code>, <code>--fees</code>)</li>
<li><code>--gas={int}</code>: use the specified amount of gas and the transaction fee</li>
<li><code>--fees={int}{denom}</code>: use the specified fee for tx. Use the gas default (200000) for tx.</li>
<li><code>--fees={int}{denom} --gas={int}</code>: Use the specified gas and fee. Computes the gas-price using the provided parameters</li>
<li><code>--gas-prices={int}{denom}</code>: Use provided gas prices and default gas amount (200000)</li>
<li><code>--gas-prices={int}{denom} --gas={int}</code>: Use the gas specified for tx and calculate the price with the corresponding parameters.</li>
</ul>
<p>Readers should note that the first two options provide a more user-friendly experience for new users, while the latter are intended for more advanced users who want more control over these parameters.</p>
<p>The team introduced the 'auto' flag option, which automatically calculates the gas and fees required to execute a transaction. In this way, new users or developers can execute transactions without defining specific gas and fee values.</p>
<p>Using the <code>auto</code> flag may sometimes not estimate the correct gas and fees based on network traffic.
To overcome this, you can use a higher value for the <code>--gas-adjustment</code> flag.
By default it is set to <code>1.2</code>.
When the estimate is insufficient, retry a higher gas adjustment, such as <code>--gas-adjustment 1.3</code>.</p>
<p>The <code>--gas-prices</code> and <code>--fees</code> flags cannot be combined.
If so, the user will receive an error message stating that fees and gas prices cannot be provided at the same time.</p>
<p>Keep in mind that the above combo may fail if the fee or gas amount offered is insufficient.
If this is the case, the CLI will return an error message with the specific reason. For example:</p>
<pre><code class="language-shell">raw_log: 'out of gas in location: submit proposal; gasWanted: 200000, gasUsed: 263940.
  Please retry with a gas (--gas flag) amount higher than gasUsed: out of gas'
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.94c44541.min.js"></script>
      
    
  </body>
</html>